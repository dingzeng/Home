# 研发思路

## 标准的问题定位步骤：
1. 确认刚才是否有过代码变更和部署，因为有比较高的概率是刚才变更的代码又搞坏了;
2. 追踪链路日志看链路是否有异常；
3. 通过RPC的控制台调用看接口输入输出是否符合预期；
4. 追踪关键方法的入参和出参，看是否有问题；
5. 定位到方法细节后，推理逻辑是否有问题；
6. 如果无法通过推理，那就最后一招，回放异常流量debug，这样肯定能够找到原因。

## 性能优化分析步骤:
1. 通过实际流量制造一个耗时较高的trace；
2. 进行trace分析，看清楚耗时最多的原因，然后按优先级进行排序；
3. 针对对原因找解决方案，可能的方案有：
  - 减少数据访问次数或者计算量，常见手段是增加cache：线程内的invokeCache；分布式缓存tair；页面缓存……
  - 增强处理速度，比如多线程加速；
  - 减少循环调用次数，比如请求合并后再分发；
  - 减少数据处理范围，比如减少查询内容，异步加载分页；
  - 逻辑简化，比如逻辑进行优化，或者非核心逻辑异步化等；
4. 改掉以后，回放同样的case，看性能消耗是否满足预期，不满足预期继续优化；

## 熟悉一个新系统的步骤:
1. 要一个测试账号，把相关功能走一遍，这样能非常快地了解一个系统的功能；
2. 看关键的核心表结构，这样可以快速了解系统的领域模型；
3. 根据功能步骤找到系统对外的接口列表，了解系统的L0业务流程；
4. 下载系统工程，熟悉整个工程结构和模块职责；
5. 以一个最重要的流程为入手点，阅读代码，看清楚核心的执行逻辑，可以变看边画时序图；
6. 制造一个debug场景，以debug方式走一遍流程，这样可以实际加深一下对系统的理解；
7. 做一个小需求，掌握相关的流程和权限；

## 给一个新的需求出技术方案的步骤：
1. 看清楚之前的需求，把这个需求所在的场景和链路大致阅读一遍，搞懂；
2. 找到需求的变化点；
3. 分析变更的方案，涉及的内容可能会有：
  - 数据结构会不会变，如何变；
  - 交互协议会不会变，如何变，交互协议分为：端和组件要不要变；和下游接口要不要变；
  - 执行逻辑会不会变，如何变，执行逻辑变更的细化考虑点：是否变更域服务；是否变更流程编排；是否变更主干逻辑；是否变更扩展点是否变更扩展点的内部逻辑，变更内部逻辑的时候，又可以进一步拆解：
    - a.重构原有的方法，覆盖之前的逻辑，那就需要进行回归；
    - b.通过逻辑路由到新的方法，这里需要增加路由逻辑；
4. 稳定性方案；
5. 发布方案；
